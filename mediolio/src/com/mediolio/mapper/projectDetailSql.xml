<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="pd">
  
	<select id="getReplyList" parameterType="int" resultType="rvo">
		SELECT * FROM reply WHERE p_id=#{p_id} ORDER BY p_id DESC
	</select>
  
  	<select id="projectDetail" parameterType="int" resultType="pdvo">
  		SELECT p.p_id, m.m_id, p.cate_id, p.p_viewnum, m.m_studentID, m.m_nickname, m.m_introduce, m.m_interestingPart, 
  		p.sc_id, c.cate_name, p.p_title, p.p_date,
  		(SELECT count(*) FROM member_action WHERE act_type='like' AND p_id=#{p_id}) p_likenum
  			FROM project p JOIN member m ON p.m_id=m.m_id JOIN category c ON p.cate_id=c.cate_id
  			WHERE p.p_id=#{p_id}
  	</select>
  	
  	<select id="projectHash" parameterType="int" resultType="hvo">
  		SELECT h_id, h_value FROM hashtag WHERE p_id=#{p_id}
  	</select>
  </mapper>
	